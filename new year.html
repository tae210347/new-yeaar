<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Happy New Year</title>

<style>
body{
    margin:0;
    background:#FFF0F5;
    overflow:hidden;
    font-family:Arial;
}

#fireworks{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
    z-index:-1;
}

#heartCanvas,#fallCanvas{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100vh;
    pointer-events:none;
    z-index:2;
    display:none;
}

#page1,#page2,#page3{
    width:100%;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

h1{
    font-size:80px;
    color:#000;
}

button{
    font-size:22px;
    padding:12px 25px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    z-index:10;
}

#nextBtn{
    position:fixed;
    bottom:25px;
    right:25px;
}

#page2{background:white;display:none;}
#page3{background:white;display:none;}

#ccc{
    width:300px;
    margin-top:20px;
    display:none;
    cursor:pointer;
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ü‡∏î‡∏Ç‡∏∂‡πâ‡∏ô */
.fadeText{
    opacity:0;
    font-size:50px;
    animation:fadein 2s forwards;
}

@keyframes fadein{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}

#rose{
    width:350px;
    margin-top:20px;
    opacity:0;
    animation:fadein 2s forwards 1s;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<!-- PAGE 1 -->
<div id="page1">
<h1>üéÜ HAPPY NEW YEAR üéÜ</h1>
<button id="nextBtn">‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡∏ï‡πà‡∏≠‡∏Å‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ</button>
</div>

<!-- PAGE 2 -->
<div id="page2">
<h1>‡πÑ‡∏≠‡∏ß‡∏µ‡πà‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏≤‡∏°‡∏±‡πâ‡∏¢ ‚ù§Ô∏è</h1>

<div>
<button id="noBtn">‡πÑ‡∏°‡πà</button>
<button id="yesBtn">‡∏£‡∏±‡∏Å</button>
</div>

<img id="ccc">
<canvas id="heartCanvas"></canvas>
</div>

<!-- PAGE 3 -->
<div id="page3">
<h1 class="fadeText">‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÑ‡∏õ‡∏ï‡∏•‡∏≠‡∏î‡∏õ‡∏µ‡πÄ‡∏•‡∏¢ ‚ú®</h1>

<img id="rose" src="rose9.png">

<h2 class="fadeText" style="animation-delay:2.5s;">
‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏õ‡∏µ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ‚ù§Ô∏è
</h2>

<canvas id="fallCanvas"></canvas>
</div>

<script>
/* ====== ‡∏´‡∏ô‡πâ‡∏≤ 1 ‡∏û‡∏•‡∏∏‡∏õ‡∏Å‡∏ï‡∏¥ ====== */
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let particles = [];
class Particle{
 constructor(x,y,color){
  this.x = x;
  this.y = y;
  this.radius = 2;
  this.color = color;
  this.speedX = Math.random()*4-2;
  this.speedY = Math.random()*4-2;
  this.life = 100;
 }
 draw(){
  ctx.beginPath();
  ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);
  ctx.fillStyle=this.color;
  ctx.fill();
 }
 update(){
  this.x+=this.speedX;
  this.y+=this.speedY;
  this.life--;
 }
}

function boom(){
 let x = Math.random()*canvas.width;
 let y = Math.random()*canvas.height/2;
 let color = `hsl(${Math.random()*360},100%,60%)`;
 for(let i=0;i<50;i++){
  particles.push(new Particle(x,y,color));
 }
}

function animate(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 particles.forEach((p,i)=>{
  p.update();
  p.draw();
  if(p.life<=0) particles.splice(i,1);
 });
 requestAnimationFrame(animate);
}
setInterval(boom,800);
animate();

/* ====== ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ====== */
document.getElementById("nextBtn").onclick = ()=>{
 document.getElementById("page1").style.display="none";
 document.getElementById("page2").style.display="flex";
};

/* ====== ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà ====== */
let noBtn = document.getElementById("noBtn");
let yesBtn = document.getElementById("yesBtn");
let ccc = document.getElementById("ccc");
let noClick = 0;

noBtn.onclick = ()=>{
    noClick++;
    if(noClick===1){
        noBtn.style.transform="scale(0.5)";
    }
    else if(noClick===2){
        noBtn.style.display="none";
    }
}

/* ====== ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏≠‡∏¢ ====== */
const heartCanvas = document.getElementById("heartCanvas");
const hctx = heartCanvas.getContext("2d");
heartCanvas.width = innerWidth;
heartCanvas.height = innerHeight;

let hearts = [];
class Heart{
 constructor(){
     this.x = Math.random()*heartCanvas.width;
     this.y = heartCanvas.height;
     this.size = Math.random()*20+10;
     this.speedY = Math.random()*4+2;
     this.alpha = 1;
     this.color = `hsl(${Math.random()*360},100%,60%)`;
 }
 draw(){
     hctx.save();
     hctx.globalAlpha = this.alpha;
     hctx.fillStyle = this.color;
     hctx.beginPath();
     hctx.moveTo(this.x, this.y);
     hctx.bezierCurveTo(this.x-this.size, this.y-this.size,
                       this.x-this.size, this.y+this.size/2,
                       this.x, this.y-this.size);
     hctx.bezierCurveTo(this.x+this.size, this.y+this.size/2,
                       this.x+this.size, this.y-this.size,
                       this.x, this.y);
     hctx.fill();
     hctx.restore();
 }
 update(){
     this.y -= this.speedY;
     this.alpha -= 0.01;
 }
}

function shootHearts(){
 setInterval(()=>{
  for(let i=0;i<10;i++){
   hearts.push(new Heart());
  }
 },200);
}

function heartAnimate(){
 hctx.clearRect(0,0,heartCanvas.width,heartCanvas.height);
 hearts.forEach((h,i)=>{
  h.update();
  h.draw();
  if(h.alpha<=0) hearts.splice(i,1);
 });
 requestAnimationFrame(heartAnimate);
}
heartAnimate();

/* ====== ‡∏û‡∏•‡∏∏‡∏´‡∏±‡∏ß‡πÉ‡∏à ====== */
function heartFirework(){
 let centerX = innerWidth/2;
 let centerY = innerHeight/2;
 let color = "pink";

 for(let i=0;i<250;i++){
     let angle = Math.random()*Math.PI*2;
     let r = 150*(1 - Math.sin(angle));
     let x = centerX + r*Math.cos(angle);
     let y = centerY + r*Math.sin(angle);

     let p = new Particle(centerX,centerY,color);
     p.speedX = (x-centerX)/20;
     p.speedY = (y-centerY)/20;
     particles.push(p);
 }
}

/* ====== ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏±‡∏Å ====== */
yesBtn.onclick = ()=>{
 heartCanvas.style.display="block";
 ccc.src = "ccc.jpg";
 ccc.style.display="block";
 shootHearts();
 heartFirework();
};

/* ====== ‡∏´‡∏ô‡πâ‡∏≤ 3 ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏ï‡∏Å ====== */
const fallCanvas = document.getElementById("fallCanvas");
const fctx = fallCanvas.getContext("2d");
fallCanvas.width = innerWidth;
fallCanvas.height = innerHeight;

let falling = [];
class FallingHeart{
 constructor(){
  this.x = Math.random()*fallCanvas.width;
  this.y = -10;
  this.size = Math.random()*20+10;
  this.speed = Math.random()*3+2;
  this.alpha = 1;
  this.color = "red";
 }
 draw(){
  fctx.save();
  fctx.fillStyle = this.color;
  fctx.globalAlpha=this.alpha;
  fctx.beginPath();
  fctx.moveTo(this.x, this.y);
  fctx.bezierCurveTo(this.x-this.size, this.y-this.size,
                    this.x-this.size, this.y+this.size/2,
                    this.x, this.y+this.size);
  fctx.bezierCurveTo(this.x+this.size, this.y+this.size/2,
                    this.x+this.size, this.y-this.size,
                    this.x, this.y);
  fctx.fill();
  fctx.restore();
 }
 update(){
  this.y+=this.speed;
  this.alpha-=0.003;
 }
}

function startFalling(){
 setInterval(()=>{
  falling.push(new FallingHeart());
 },120);
}

function fallAnimate(){
 fctx.clearRect(0,0,fallCanvas.width,fallCanvas.height);
 falling.forEach((h,i)=>{
  h.update();
  h.draw();
  if(h.alpha<=0) falling.splice(i,1);
 });
 requestAnimationFrame(fallAnimate);
}
fallAnimate();

/* ===== ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏£‡∏π‡∏õ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ 3 ===== */
ccc.onclick = ()=>{
 document.getElementById("page2").style.display="none";
 document.getElementById("page3").style.display="flex";
 fallCanvas.style.display="block";
 startFalling();
};
</script>

</body>
</html>
